{% extends "base.html" %}
{% block content %}
<div class="ui large modal">
  <div id="modal_header" class="header">Header</div>
  <div class="image content">
    <img id="modal_image" class="image">
    <div class="description">
      <p></p>
    </div>
  </div>
</div>
<div class="ui segments">
    <div class="ui segment">
        <div class="ui six link cards">
            {%for pokemon in pokemon_list %}
            <div class="card" onClick="loadData('{{pokemon.name}}')">
                <div class="image">
                    <img src="{{pokemon.image}}">
                </div>
                <div class="content">
                    <div class="header">{{pokemon.name}}</div>
                </div>
                <div class="extra content">
                    <span>
                        <i class="book icon"></i>
                        Pok√©dex #{{pokemon.pokedex_id}}
                    </span>
                </div>
            </div>
            {%endfor%}
        </div>
    </div>
    <div class="ui center aligned segment">
        <div class="ui pagination menu">
            <a class="item" href="?page=0"><i class="angle double left icon"></i></a>
            {%for itm in pages%}
            <a class="{%if itm.is_active%}active{%endif%} item" href="?page={{itm.number}}"> {{itm.display}}</a>
            {%endfor%}
            <a class="item" href="?page={{max}}"><i class="angle double right icon"></i></a>
      </div>
    </div>
</div>
<script>
    function loadData(name){
        let xhr = new XMLHttpRequest();
        xhr.open('GET', `/pkmn?for=${name}`);
        xhr.onload = function() {
            if(xhr.status == 200){
                response_parsed = JSON.parse(xhr.response)
                console.log(response_parsed)
                $('#modal_header').text(response_parsed.name)
                $('#modal_image').attr('src', response_parsed.image)
                $('.large.modal').modal('show');
            }
        };
        xhr.send();
    }
</script>
{% endblock %}